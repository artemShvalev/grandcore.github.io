# Coresh - описание версии 0.1

**Точка входа:** 
- Проверяется зарегистрирован ли пользователь.
- Если зарегистрирован, проверяется не забанен ли.
- Если забанен - выводится сообщение "Вам здесь не рады".
- Если не зарегистриован - создаётся учётная запись и перебрасывается на роутер.
- Если зарегистрирован и не забанен - перебралывается в роутер.

**Роутер:**
- Проверяется количество обработанных пользователем карточек 
- Если делится на 101 - показывается информационная карточка
- Если делится на 100 - показывается карточка лучшего соседа
- Если делится на 50 - показывается карточка вопроса сообществу
- Если делится на 25 - показывается карточка вопроса пользователю
- Если не делится - показывается карточка оценки вопроса

**Карточка лучшего соседа:**
- Выводится телеграм лучшего соседа и история его последних вопросов и ответов. Собеседник добавляется в бан, что бы его карточки больше не показывались.

**Карточка вопроса сообществу:**
- Выводится приглашение к вводу вопроса сообществу

**Карточка вопроса пользователю:**
- с вероятностью 70% выводится необработанный вопрос от пользователя с самым высоким рейтингом соседства. Если таких вопросов нет - берётся пользователь со вторым самым высоким рейтингом соседства. 
- с вероятностью 30% выводится самая популярная, созданная не более 1 дня назад необработанная пользователем карточка. Также работает как запасной вариант. 

**Карточка оценки вопроса:**
- с вероятностью 70 % выводится ещё необработанная самая популярная карточка случайного соседа. 
- с вероятностью 30 % выводится последняя лайкнутая случайным соседом карточка.
- Запасной вариант - самая популярная в система карточка необработанная пользователем.

**Карточка информационная:**

**Хелперы**
- Каждая карточка проверяется на авторство юзера из чёрного списка пользователя.
- Каждая карточка проверяется была ли она уже обработана пользователем.

**Примечания**
- Изначально, каждый новый сосед имеет рейтинг 3, каждая карточка рейтинг 10.
- Не обрабатываются карточки и соседи с отрицательным рейтингом.
